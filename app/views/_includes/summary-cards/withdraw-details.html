{% set withdrawalDate %}
  {% if record | isDeferred %}
    {{ record.withdraw.date | govukDate }} (date of deferral)
  {% else %}
    {{ record.withdraw.date | govukDate or "Not provided" }}
  {% endif %}
{% endset %}


{% set withdrawalReason %}
  {% if record.withdraw.reason == "For another reason" %}
    {{record.withdraw.reasonOther}}
  {% else%}
    {{record.withdraw.reason}}
  {% endif %}
{% endset %}



{% set withdrawDetailsRows = [
  {
    key: {
      text: "Trainee start date"
    },
    value: {
      text: record.trainingDetails.commencementDate | govukDate
    },
    actions: {
      items: [
        {
          href: recordPath + "/withdraw/did-trainee-start" | addReferrer(referrer),
          text: "Change",
          visuallyHiddenText: "trainee start date"
        }
      ]
    }
  } if record.withdraw.showStartDate,
  {
    key: {
      text: "Date of withdrawal"
    },
    value: {
      text: withdrawalDate
    },
    actions: {
      items: [
        {
          href: recordPath + "/withdraw" | addReferrer(referrer),
          text: "Change",
          visuallyHiddenText: "withdrawal date"
        }
      ]
    } if canAmend and record.status != "Deferred"
  },
  {
    key: {
      text: "Reason for withdrawal"
    },
    value: {
      text: withdrawalReason or 'Not provided'
    },
    actions: {
      items: [
        {
          href: recordPath + "/withdraw" | addReferrer(referrer),
          text: "Change",
          visuallyHiddenText: "withdrawal reason"
        }
      ]
    } if canAmend
  }
] %}

{% set withdrawDetailsHtml %}
  {{ govukSummaryList({
    rows: withdrawDetailsRows
  }) }}
{% endset %}

{{ appSummaryCard({
  classes: "govuk-!-margin-bottom-6",
  titleText: "Withdrawal details",
  html: withdrawDetailsHtml
}) }}


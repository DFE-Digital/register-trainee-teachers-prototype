{% extends "_templates/_record-form.html" %}

{% set missingItems = data.record | getCourseChangeMissingItems %}

{% set pageHeading = "More data needed" if missingItems else "Review trainee data" %}

{# Custom return link to send to bespoke cancel page #}
{% set returnLink = {
  href: "./cancel-course-change" | addReferrer(referrer),
  text: "Cancel and reteurn to record"
} %}

{% block formContent %}
  {% include "_includes/trainee-name-caption.njk" %}

  <h1 class="govuk-heading-l">{{pageHeading}}</h1>
  
  <p class="govuk-body">
    Because you updated the traineeâ€™s course details, you need to review other training details to make sure they match the new course details.
  </p>

  {% set missingItems = record | getCourseChangeMissingItems %}

  {% if missingItems | length %}
    <p class="govuk-body">Trainee data needed:</p>
    <ul class="govuk-list govuk-list--bullet">
      {% for item in missingItems %}
        <li>{{item}}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {{ govukButton({
    text: "Provide missing data" if (missingItems | length) else "Review training details",
    href: "./get-next-course-change-url" | addReferrer(referrer)
  }) }}

{% endblock %}




